---
name: coordinate-check
description: DRAFTS_XYSやテンプレート座標を変更しようとしたときに警告
---

# 座標変更の警告

座標を変更しようとしています。以下を確認してください。

## 変更対象の確認
- **DRAFTS_XYS座標**（config.php 647-661行目）
  → 印刷用PDFの配置位置。変更すると全体がずれる

- **テンプレート座標**（config.php TEMPLATES定義内）
  → 個別要素の位置。デザインに影響

## 変更前の必須手順

### 1. ユーザーに確認を取る
- なぜ変更が必要か説明
- 影響範囲を伝える

### 2. バックアップを作成
```bash
git add -A && git commit -m "Before coordinate change"
```

### 3. 1箇所ずつ変更
- 複数同時変更禁止
- 変更箇所を明確に記録

### 4. テスト実行
```bash
php run.php
# draft/フォルダのPDFを確認
```

### 5. 変更前後のPDFを比較
- 位置ずれがないか確認
- 他の要素に影響がないか確認

## 座標システムの違い

| 種類 | 基準 | 説明 |
|------|------|------|
| DRAFTS_XYS | ドキュメント中央 | 印刷用PDF配置位置（相対座標） |
| TEMPLATES | 左上 | 個別要素の位置（絶対座標） |

## 回転が絡む場合の注意
- 回転軸は要素の中心点
- 回転後の座標計算は複雑になる
- 必ず `StartTransform()` / `StopTransform()` で囲む
